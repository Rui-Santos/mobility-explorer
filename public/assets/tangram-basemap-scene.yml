import:
 # basemap style
    - https://mapzen.com/carto/refill-style/7/refill-style.zip
    # recolor basemap style with a theme color
    - https://mapzen.com/carto/refill-style/7/themes/gray.zip

global:
    sdk_mapzen_api_key: mapzen-kdQfRFc
    sdk_building_extrude: true
    sdk_transit_overlay: false
    # ^ TODO: control this programmatically, store in config/environment.js

sources:
    mapzen:
        type: TopoJSON
        url: https://tile.mapzen.com/mapzen/vector/v1/all/{z}/{x}/{y}.topojson
# scene:
#     background:
#         color: white
# layers:
# *** I'd like to not render ferry lines ***
# 		roads:
#         data: { source: mapzen }
#         ferry:
#             filter: { kind: ferry }
#             draw:
#                 lines:
#                     color: global.light_color
#                     width: 0.5px
#                     outline:
#                         width: 0px
#     # water:
    #     data: { source: mapzen}
    #     draw:
    #         waves:
    #             # order: global.feature_order
    #             color: blue
    #     lakes:
    #     		filter:
    #     				all:
    #     						- kind: [ocean, lake, water, riverbank, reservoir, swimming_pool]
    #     		draw:
    #     				waves:
    #     						color: blue
    # landuse:
    #     data: { source: mapzen }
    #     draw:
    #         dots:
    #             order: global.feature_order
    #             visible: false
    #         medium-dots:
    #             order: global.feature_order
    #             visible: false
    #         horizontal-bars:
    #             order: global.feature_order
    #             visible: false
    #         horizontal-bars-rev:
    #             order: global.feature_order
    #             visible: false
    #         dots-rev:
    #             order: global.feature_order
    #             visible: false
    #         dots-rev-grid:
    #             order: global.feature_order
    #             visible: false
    #         pixel-pattern-light:
    #             order: global.feature_order
    #             visible: false
    #         pixel-pattern-bright:
    #             order: global.feature_order
    #             visible: false
    #         tiny-dots:
    #             order: global.feature_order
    #             visible: false
    #         polygons:
    #             order: global.feature_order
    #             visible: false
    #         lines:
    #             order: global.feature_order

    #     #tier1:
    #     national_park:
    #         filter:
    #             all:
    #                 - kind: [national_park, battlefield, protected_area]
    #             any:
    #                 - not: { operator: [ "United States Forest Service" ] }
    #                 - protect_class: ['2','3','5']
    #         draw:
    #             dots:
    #                 color: global.lighter_color
    #                 order: 18
    #                 visible: true
    #         us_national_park:
    #             # yosemite national park, death valley national park, grand canyon national park
    #             filter:
    #                 any:
    #                     - operator: [ "United States National Park Service" ]
    #                     - protect_class: ['2','3','5']
    #             draw:
    #                 pixel-pattern-light:
    #                     visible: true

    #     #tier2:
    #         # effectively wilderness
    #     conservation:
    #         filter:
    #             $zoom: { min: 4 }
    #             kind: [protected_area, nature_reserve, national_park]
    #             not: { protect_class: ['2','3','5']}
    #         draw:
    #             pixel-pattern-light:
    #                 color: red
    #                 visible: true

    #     national_forest_level_6:
    #         filter:
    #             all:
    #                 - kind: forest
    #             any:
    #                 - protect_class: ['6']
    #                 - operator: ['United States Forest Service']
    #         draw:
    #             pixel-pattern-bright:
    #                 color: global.lighter_color
    #                 visible: true

    #     forest-landcover:
    #         filter: { kind: [forest, natural_forest, wood, natural_wood, natural_park], $zoom: { min: 10 }, not: { operator: "United States Forest Service" } }
    #         draw:
    #             pixel-pattern-light:
    #                     visible: true

    #     parks-and-national-forests-not-national-park:
    #         filter:
    #             all:
    #                 - $zoom: { min: 4 }
    #                 - kind: [park, national_park]
    #             any:
    #                 - not: { operator: [ "United States National Park Service", "United States Forest Service" ] }
    #                 - not: { protect_class: ['2','3','5','6'] }
    #         # default for national forests and more?
    #         draw:
    #             dots:
    #                 color: global.lighter_color
    #                 visible: true
    #         national_park:
    #             #filter: function() { return feature.name && (feature.name.indexOf('National Park') > -1); }
    #             filter:
    #                 all:
    #                     - kind: national_park
    #                     - not: [ protect_class: ['2','3','5','6'], operator: [ "United States National Park Service"] ]
    #             draw:
    #                 pixel-pattern-light:
    #                     visible: true

    # water:
    #     data: { source: mapzen, layer: water }
    #     draw:
    #         waves:
    #             order: global.feature_order
    #             color: [0.392, 0.475, 0.576, 1.00] # colors the wave lines
    #     later:
    #         filter: { $zoom: { min: 12 } }
    #         draw:
    #             waves:
    #                 color: [0.392, 0.475, 0.576, 1.00] # colors the wave lines
    #                 order: function() { return feature.sort_rank + 1; }

    #     lakes:
    #         filter:
    #             all:
    #                 - kind: [ocean, lake, water, riverbank, reservoir, swimming_pool]
    #             any:
    #                 # limit show smaller landuse areas to higher zooms
    #                 - { $zoom: { min: 1 },  area: { min: 40000000000 } }
    #                 - { $zoom: { min: 2 },  area: { min: 20000000000 } }
    #                 # some weird natural earth scale set transition
    #                 - { $zoom: { min: 3 },  area: { min: 80000000000 } }
    #                 - { $zoom: { min: 4 },  area: { min: 5000000000 } }
    #                 - { $zoom: { min: 5 },  area: { min: 700000000 } }
    #                 - { $zoom: { min: 6 },  area: { min: 500000000 } }
    #                 - { $zoom: { min: 7 },  area: { min: 160000000 } }
    #                 - { $zoom: { min: 8 },  area: { min: 40000000 } }
    #                 - { $zoom: { min: 9 },  area: { min: 10000000 } }
    #                 - { $zoom: { min: 10 }, area: { min: 8000000 } }
    #                 - { $zoom: { min: 11 }, area: { min: 2000000 } }
    #                 - { $zoom: { min: 12 }, area: { min: 200000 } }
    #                 - { $zoom: { min: 13 }, area: { min: 100000 } }
    #                 - { $zoom: { min: 14 }, area: { min: 2000 } }
    #                 - { $zoom: { min: 15 } }
    #         draw:
    #             waves:
    #                 color: [0.408, 0.588, 0.800, 1.00]

    #     other-water-areas:
    #         filter: { not: { kind: [ocean, lake, water, reservoir, playa] }, $zoom: { min: 11 }, area: { min: 100 } }
    #         draw:
    #             waves:
    #                 color: global.lighter_color
    #     playas:
    #         filter: { kind: playa }
    #         draw:
    #             polygons:
    #                 order: global.feature_order
    #                 color: global.offwhite_color
    #     swimming_pool:
    #         filter: { kind: swimming_pool }
    #         draw:
    #             waves:
    #                 color: global.lighter_color
    #     water-boundary-ocean:
    #         filter: { boundary: true, kind: ocean, $zoom: { min: 1 } }
    #         draw:
    #             coast:
    #                 order: global.feature_order
    #                 color: [[1, global.light_color], [6, global.mid_color]]
    #                 width: [[1, 1px], [20, 10px]]
    #                 join: round
    #     water_boundaries-not-ocean:
    #         filter: { boundary: true, not: { kind: ocean }, $zoom: { min: 8 } }
    #         draw:
    #             coast:
    #                 order: global.feature_order
    #                 color: [[6, global.lightest_color], [11, global.mid_color]]
    #                 width: [[6, 0.75px], [10, 1px], [14, 2px], [16, 3px]]
    #                 join: round
    #         # do we still need this?
    #         # early:
    #         #     filter: { $zoom: { min: 14 } }
    #         #     draw:
    #         #         lines:
    #         #             order: 241
    #         swimming-pools-early:
    #             filter: { kind: swimming_pool, $zoom: { max: 19 } }
    #             draw:
    #                 coast:
    #                     visible: false
    #         riverbank:
    #             # river boundaries like the thames in london, la seine in paris
    #             filter: { kind: riverbank }
    #             draw:
    #                 coast:
    #                     color: global.dark_color
    #                     width: [[9, 0.5px], [11, 1px], [14, 1px], [15, 2px]]
    #     river:
    #         #river center lines, not boundaries for polygons
    #         filter: { kind: [river,canal,stream,dam,ditch,drain], $zoom: { min: 14 }, not: { is_tunnel: true } }
    #         draw:
    #             waves:
    #                 order: global.feature_order
    #                 color: global.lighter_color
    #                 width: [[14, 0.5px], [15, 2px], [17, 6px],[ 18, 8px]]
    #                 cap: round
